
## 1.基本概念

![[Pasted image 20230515162320.png]]

	1）消息传输层（Speed Layer）
	消息传输层提供接收和存储流数据的消息队列，数据可以在某个需要限度内全量存储，并在必要时从头开始读取重新计算，从而获得可靠结果。
	消息传输层通常具有以下特点：
		持久性------数据可任意设定存储时间
		分布式------数据分布式存储
		数据可重放------数据可以被replay，从头重新处理
		高性能------能够提供高性能数据读写访问

	2）流处理层（Serving Layer）
	流处理层提供流计算引擎，用于进行流分布式实时计算。
	流处理层通常具有以下特点：
		低延迟------保证快速响应
		高吞吐------同时处理庞大数据量
		具有容错与恢复能力------保证系统稳定可用
		一致性保证------适用任何强一致性需求的应用(如金融级需求)

	3）流处理核心思想
	1.用Kafka或者类似MQ队列系统收集各种各样的数据，你需要几天的数据量就保存几天。
	2.当需要全量重新计算时，重新起一个流计算实例，从头开始读取数据进行处理，并输出到一个新的结果存储中。
	3.当新的实例做完后，停止老的流计算实例，并把老的一些结果删除。

## 2. Kappa架构优点
Kappa架构的优点在于将实时和离线代码统一起来，方便维护而且统一了数据口径的问题。

## 3. Kappa架构缺点
流式处理对于历史数据的高吞吐量力不从心：所有的数据都通过流式计算，即便通过加大并发实例数亦很难适应IOT时代对数据查询响应的即时性要求。
	
	开发周期长：此外Kappa架构下由于采集的数据格式的不统一，每次都需要开发不同的Streaming程序，导致开发周期长。
	高度依赖实时计算系统的能力：在实时数据处理时，遇到大量不同的实时流进行关联时，非常依赖实时计算系统的能力，很可能因为数据流先后顺序问题，导致数据丢失。
	服务器成本浪费：Kappa架构的核心原理依赖于外部高性能存储redis,hbase服务。但是这2种系统组件，又并非设计来满足全量数据存储设计，对服务器成本严重浪费。

## 4.Lambda架构和Kappa架构的对比

![[Pasted image 20230515162526.png]]

![[Pasted image 20230515162547.png]]
